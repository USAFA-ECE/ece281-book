
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ICE 6: Time Division Multiplexor &#8212; ECE 281</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/print.css?v=74670715" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ICE/ICE6';</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 1 - ThirtyOneDayMonth" href="../lab/lab1.html" />
    <link rel="prev" title="ICE 5: Basic Elevator Controller" href="ICE5.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="ECE 281 - Home"/>
    <img src="../_static/logo.png" class="logo__image only-dark pst-js-only" alt="ECE 281 - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    ECE 281: Digital Design and Computer Architecture
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">In Class Exercise</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ICE0.html">BCE 0: Get started with Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE1.html">ICE 1: Breadboard Half Adder</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE2.html">ICE 2: VHDL Half-Adder</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE3.html">ICE 3: Full Adder</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE4.html">ICE 4: Stoplight</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE5.html">ICE 5: Basic Elevator Controller</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">ICE 6: Time Division Multiplexor</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Labs</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../lab/lab1.html">Lab 1 - ThirtyOneDayMonth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab/lab2.html">Lab 2 - Seven Segment Display Decoder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab/lab3.html">Lab 3 - Thunderbird Turn Signal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab/lab4.html">Lab 4 - Moore Elevator Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab/lab5.html">Lab 5 - Basic CPU</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Homework</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../HW/HW6.html">HW 6 - Digital Schematics</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../appendix/github.html">GitHub real fast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/vivado.html">Xilinx Vivado</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/usafa-ece/ece281-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/usafa-ece/ece281-book/issues/new?title=Issue%20on%20page%20%2FICE/ICE6.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/ICE/ICE6.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>ICE 6: Time Division Multiplexor</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#authorized-resources">Authorized Resources</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">Objectives</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#end-state">End State</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-vivado">Setup Vivado</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#time-division-multiplexing">Time Division Multiplexing</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tdm4-vhd">TDM4.vhd</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#entity">Entity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture">Architecture</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tdm4-tb-vhd">TDM4_tb.vhd</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deliverables">Deliverables</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ice-6-time-division-multiplexor">
<h1>ICE 6: Time Division Multiplexor<a class="headerlink" href="#ice-6-time-division-multiplexor" title="Link to this heading">#</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id3">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#authorized-resources" id="id4">Authorized Resources</a></p></li>
<li><p><a class="reference internal" href="#objectives" id="id5">Objectives</a></p></li>
<li><p><a class="reference internal" href="#end-state" id="id6">End State</a></p></li>
<li><p><a class="reference internal" href="#setup-vivado" id="id7">Setup Vivado</a></p></li>
<li><p><a class="reference internal" href="#time-division-multiplexing" id="id8">Time Division Multiplexing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tdm4-vhd" id="id9">TDM4.vhd</a></p>
<ul>
<li><p><a class="reference internal" href="#entity" id="id10">Entity</a></p></li>
<li><p><a class="reference internal" href="#architecture" id="id11">Architecture</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tdm4-tb-vhd" id="id12">TDM4_tb.vhd</a></p></li>
<li><p><a class="reference internal" href="#deliverables" id="id13">Deliverables</a></p></li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>In this in-class exercise, you will learn how to use the Time Division
Multiplexor (TDM) by building a test bench for it and simulating. This
will be directly applicable to creating your elevator controller in
Lab4.</p>
<p>A TDM allows you to rapidly switch between multiple data sets. This is
especially useful when you only have one channel on which to send data
(your seven segment display for instance). The TDM operation is fairly
simple. It is driven by a clock and cycles between N different inputs
(in this case 4) continuously. Only one of the 4 inputs comes out of the
TDM at a time.</p>
<section id="authorized-resources">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Authorized Resources</a><a class="headerlink" href="#authorized-resources" title="Link to this heading">#</a></h3>
<p>You may seek help from any cadet or instructor, not limited to this
course, and reference any publication in its completion. Online
resources are acceptable. However, no resources containing a solution is
allowed. Your work must <strong>always</strong> be your own. Normal documentation of
all resources utilized is required.</p>
</section>
<section id="objectives">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Objectives</a><a class="headerlink" href="#objectives" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Understand Time Division Multiplexing</p></li>
<li><p>Prepare for Lab 4</p></li>
</ul>
</section>
<section id="end-state">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">End State</a><a class="headerlink" href="#end-state" title="Link to this heading">#</a></h3>
<p>This ICE requires a Gradescope submission with short answer questions,
but there is no demo requirement!</p>
<p>Additionally, there is a GitHub Action testbench that should pass.
Ensure your two VHDL files are pushed to your repository.</p>
</section>
<section id="setup-vivado">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Setup Vivado</a><a class="headerlink" href="#setup-vivado" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Fork and clone <a class="reference external" href="https://github.com/USAFA-ECE/ece281-ice6">ICE6</a></p></li>
<li><p>Open the folder.</p></li>
<li><p>Double click <code class="docutils literal notranslate"><span class="pre">tdm.xpr</span></code> to open Vivado!</p></li>
</ol>
<blockquote>
<div><p>Modify headers and make an initial commit</p>
</div></blockquote>
</section>
<section id="time-division-multiplexing">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Time Division Multiplexing</a><a class="headerlink" href="#time-division-multiplexing" title="Link to this heading">#</a></h3>
<p>Time Division Multiplexing (TDM) is a method of transmitting multiple signals over a single communication channel. It works by dividing the available time on the channel into smaller time slots, with each slot allocated to a different signal. By rapidly switching between these time slots, TDM allows multiple signals to be transmitted simultaneously without interfering with each other.</p>
<figure class="align-default" id="id1">
<img alt="../_images/ice6_tdm1.png" src="../_images/ice6_tdm1.png" />
<figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text">TDM with shapes on <span class="math notranslate nohighlight">\(n = 3\)</span> channels by switching at frequency <span class="math notranslate nohighlight">\(f_{TDM}\)</span></span><a class="headerlink" href="#id1" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id2">
<img alt="../_images/ice6_tdm2.png" src="../_images/ice6_tdm2.png" />
<figcaption>
<p><span class="caption-number">Fig. 30 </span><span class="caption-text">Demuxing after transmission to get data back in to separate channels.</span><a class="headerlink" href="#id2" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="tdm4-vhd">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">TDM4.vhd</a><a class="headerlink" href="#tdm4-vhd" title="Link to this heading">#</a></h2>
<p>The file is already completed for you! <strong>But <em>please</em> read this section.</strong></p>
<p>Again, a TDM outputs a single one of its inputs at a time based on <strong>time</strong>.
This is like a normal MUX, but instead of using a select signal to determine which
input becomes the output, a TDM uses time to determine which input becomes the output.</p>
<section id="entity">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Entity</a><a class="headerlink" href="#entity" title="Link to this heading">#</a></h3>
<p>Lets start by going through each of the signals in a TDM entity with four data sets.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">entity</span><span class="w"> </span><span class="nc">TDM4</span><span class="w"> </span><span class="k">is</span>
<span class="w">    </span><span class="k">generic</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">constant</span><span class="w"> </span><span class="n">k_width</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">natural</span><span class="w">  </span><span class="o">:=</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span><span class="w"> </span><span class="c1">-- bits in input and output</span>
<span class="w">    </span><span class="k">Port</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">i_clk</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w">  </span><span class="kt">STD_LOGIC</span><span class="p">;</span>
<span class="w">        </span><span class="n">i_reset</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w">  </span><span class="kt">STD_LOGIC</span><span class="p">;</span><span class="w"> </span><span class="c1">-- asynchronous</span>
<span class="w">        </span><span class="n">i_D3</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w">  </span><span class="kt">STD_LOGIC_VECTOR</span><span class="w"> </span><span class="p">(</span><span class="n">k_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">i_D2</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w">  </span><span class="kt">STD_LOGIC_VECTOR</span><span class="w"> </span><span class="p">(</span><span class="n">k_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">i_D1</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w">  </span><span class="kt">STD_LOGIC_VECTOR</span><span class="w"> </span><span class="p">(</span><span class="n">k_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">i_D0</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w">  </span><span class="kt">STD_LOGIC_VECTOR</span><span class="w"> </span><span class="p">(</span><span class="n">k_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">o_data</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">STD_LOGIC_VECTOR</span><span class="w"> </span><span class="p">(</span><span class="n">k_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">o_sel_n</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">STD_LOGIC_VECTOR</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">-- selected data line (one-cold)</span>
<span class="w">    </span><span class="p">);</span>
<span class="k">end</span><span class="w"> </span><span class="nc">TDM4</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">k_width</span></code> is a generic constant. A constant is a set value used
elsewhere (like our test bench clock period). The generic
terminology means it is a value that can be set by the user when
they instantiate the component. We will discuss later how it impacts
this design</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i_clk</span></code> is an input signal which drives the TDM. You will connect
it to your test bench’s simulated clk</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i_reset</span></code> is an input signal which resets the TDM which sets the output to <code class="docutils literal notranslate"><span class="pre">i_D0</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i_D3</span></code> is the first of 4 data sets which are passed into the TDM.
Notice that it is a vector of <code class="docutils literal notranslate"><span class="pre">(k_width</span> <span class="pre">-1</span> <span class="pre">downto</span> <span class="pre">0)</span></code>. This means if
<code class="docutils literal notranslate"><span class="pre">k_width</span></code> is 4 then <code class="docutils literal notranslate"><span class="pre">i_D3</span></code> is a 4-bit vector from 3 downto 0.
<code class="docutils literal notranslate"><span class="pre">k_width</span></code> then allows the user to determine how big of a vector is going to be
passed through. We will use 4 in this example, but if you were to
use this with your seven segment decoder you could set it to 7.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i_D2</span></code> is the second of 4 data sets which are passed into the TDM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i_D1</span></code> is the third of 4 data sets which are passed into the TDM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i_D0</span></code> is the fourth of 4 data sets which are passed into the TDM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o_data</span></code> represents the output of the TDM. At any point in time it
will be one of <code class="docutils literal notranslate"><span class="pre">i_D3</span></code>, <code class="docutils literal notranslate"><span class="pre">i_D2</span></code>, <code class="docutils literal notranslate"><span class="pre">i_D1</span></code>, or <code class="docutils literal notranslate"><span class="pre">i_D0</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o_sel_n</span></code> is an output vector that tells the user which of the input
channels has been selected. It is one cold meaning “0111” indicates
<code class="docutils literal notranslate"><span class="pre">i_D3</span></code>, “1011” indicates <code class="docutils literal notranslate"><span class="pre">i_D2</span></code>, “1101” indicates <code class="docutils literal notranslate"><span class="pre">i_D1</span></code>, and “1110”
indicates <code class="docutils literal notranslate"><span class="pre">i_D0</span></code>. You will not need to use this signal in this
exercise, other than to verify it is indeed working.</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><code class="docutils literal notranslate"><span class="pre">k_width</span></code> determines <strong>how wide</strong> the data vectors are.</p>
<p>Each of the <code class="docutils literal notranslate"><span class="pre">i_Dx</span></code> signals are <strong>what is being multiplexed</strong>.</p>
<p>In this case, we have four input signals (<code class="docutils literal notranslate"><span class="pre">i_D0-3</span></code>),
each of which is <code class="docutils literal notranslate"><span class="pre">k_width</span> <span class="pre">:=</span> <span class="pre">4</span></code> bits wide.</p>
<ul class="simple">
<li><p>To add more inputs to MUX you need to add more <code class="docutils literal notranslate"><span class="pre">i_Dx</span></code> std_logic_vectors.</p></li>
<li><p>To change how many bits each input transmits, you need to change <code class="docutils literal notranslate"><span class="pre">k_width</span></code>
and the size of the declared std_logic_vectors.</p></li>
</ul>
</div>
</section>
<section id="architecture">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Architecture</a><a class="headerlink" href="#architecture" title="Link to this heading">#</a></h3>
<p>We introduce a new type in the signal declaration: <strong>unsigned</strong>.
The unsigned type can take basic arithmetic operations, such as addition!</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="c1">-- 2 bit counter output to select MUX input</span>
<span class="k">signal</span><span class="w"> </span><span class="n">f_sel_n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">unsigned</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;00&quot;</span><span class="p">;</span>
</pre></div>
</div>
<blockquote>
<div><p>Read the <code class="docutils literal notranslate"><span class="pre">twoBitCounter_proc</span></code> and understand the lifecycle of <code class="docutils literal notranslate"><span class="pre">f_sel_n</span></code>.</p>
<p>Read the two MUXs in concurrent statements and understand what’s going on.</p>
</div></blockquote>
</section>
</section>
<section id="tdm4-tb-vhd">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">TDM4_tb.vhd</a><a class="headerlink" href="#tdm4-tb-vhd" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Use the provided <code class="docutils literal notranslate"><span class="pre">TDM4_tb.vhd</span></code> file.</p></li>
<li><p>Finish the component declaration started in the test bench.</p></li>
<li><p>Declare the required constants</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">k_clk_period</span></code> is type <strong>time</strong> set to <code class="docutils literal notranslate"><span class="pre">20</span> <span class="pre">ns</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">k_IO_width</span></code> is type <strong>natural</strong> set to <code class="docutils literal notranslate"><span class="pre">4</span></code></p></li>
</ul>
</li>
<li><p>Declare the required signals</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">w_clk</span></code>, <code class="docutils literal notranslate"><span class="pre">w_reset</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">w_D3</span></code>, <code class="docutils literal notranslate"><span class="pre">w_D2</span></code>, <code class="docutils literal notranslate"><span class="pre">w_D1</span></code>, <code class="docutils literal notranslate"><span class="pre">w_D0</span></code>, and <code class="docutils literal notranslate"><span class="pre">f_data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f_sel_n</span></code></p></li>
</ul>
</li>
<li><p>Complete the port map</p></li>
<li><p>Finish setting up the clk process to drive the TDM.
This should resemble the FSM test benches.</p></li>
</ol>
<p>The only thing we have left is to define our input vectors.
Generally, when using the TDM these inputs will come from somewhere
else (the output of your basic elevator controller in Lab 4, for instance).</p>
<p>However, in this test we are going to hard code inputs.
Assign the following values to the data inputs under the comment</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="c1">---assign the values to data inputs</span>
<span class="n">w_D3</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">...</span>
<span class="p">...</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">i_D3</span></code> gets “1100”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i_D2</span></code> gets “1001”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i_D1</span></code> gets “0110”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i_D0</span></code> gets “0011”</p></li>
</ul>
<p>Finally, set your simulation to run for only 160 ns and run it.
You should get a waveform that looks like <a class="reference internal" href="#tdm-waveform"><span class="std std-numref">Fig. 31</span></a>.</p>
<figure class="align-default" id="tdm-waveform">
<img alt="../_images/ice6_tdmwaveform.png" src="../_images/ice6_tdmwaveform.png" />
<figcaption>
<p><span class="caption-number">Fig. 31 </span><span class="caption-text">Simulation waveform</span><a class="headerlink" href="#tdm-waveform" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="deliverables">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Deliverables</a><a class="headerlink" href="#deliverables" title="Link to this heading">#</a></h2>
<p>The Gradescope submission includes several short answer questions.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Deliverable</p></th>
<th class="head"><p>Points</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Gradescope Submission</p></td>
<td><p>50</p></td>
</tr>
<tr class="row-odd"><td><p>Passing GitHub Action</p></td>
<td><p>50</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./ICE"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="ICE5.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">ICE 5: Basic Elevator Controller</p>
      </div>
    </a>
    <a class="right-next"
       href="../lab/lab1.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lab 1 - ThirtyOneDayMonth</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#authorized-resources">Authorized Resources</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">Objectives</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#end-state">End State</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-vivado">Setup Vivado</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#time-division-multiplexing">Time Division Multiplexing</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tdm4-vhd">TDM4.vhd</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#entity">Entity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture">Architecture</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tdm4-tb-vhd">TDM4_tb.vhd</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deliverables">Deliverables</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By DFEC
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>