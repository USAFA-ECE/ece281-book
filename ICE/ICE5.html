
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ICE 5: Basic Elevator Controller &#8212; ECE 281</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ICE/ICE5';</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ICE 6: Time Division Multiplexor" href="ICE6.html" />
    <link rel="prev" title="ICE 4: Stoplight" href="ICE4.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="ECE 281 - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="ECE 281 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    ECE 281: Digital Design and Computer Architecture
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Info</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">In Class Exercise</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ICE0.html">BCE 0: Get started with Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE1.html">ICE 1: OR Gates</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE2.html">ICE 2: Half-Adder</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE3.html">ICE 3: Full Adder</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE4.html">ICE 4: Stoplight</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">ICE 5: Basic Elevator Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICE6.html">ICE 6: Time Division Multiplexor</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Labs</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../lab/lab0.html">Lab 0: Install Vivado</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab/lab1.html">Lab 1 - ThirtyOneDayMonth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab/lab2.html">Lab 2 - Seven Segment Display Decoder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab/lab3.html">Lab 3 - Thunderbird Turn Signal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab/lab4.html">Lab 4 - Moore Elevator Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab/lab5.html">Lab 5 - Basic CPU</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Homework</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../HW/HW6.html">HW 6 - Digital Schematics</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../appendix/github.html">GitHub real fast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/vivado.html">Xilinx Vivado</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/usafa-ece/ece281-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/usafa-ece/ece281-book/issues/new?title=Issue%20on%20page%20%2FICE/ICE5.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/ICE/ICE5.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>ICE 5: Basic Elevator Controller</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">Objectives</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#end-state">End State</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#system-specification">System Specification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-vivado">Setup Vivado</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#elevator-controller-fsm-vhd">elevator_controller_fsm.vhd</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#state-register-process">State register process</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#enumerated-types">Enumerated types</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#elevator-controller-fsm-tb-vhd">elevator_controller_fsm_tb.vhd</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deliverables">Deliverables</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ice-5-basic-elevator-controller">
<h1>ICE 5: Basic Elevator Controller<a class="headerlink" href="#ice-5-basic-elevator-controller" title="Link to this heading">#</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#objectives" id="id2">Objectives</a></p></li>
<li><p><a class="reference internal" href="#end-state" id="id3">End State</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#system-specification" id="id4">System Specification</a></p></li>
<li><p><a class="reference internal" href="#setup-vivado" id="id5">Setup Vivado</a></p></li>
<li><p><a class="reference internal" href="#elevator-controller-fsm-vhd" id="id6">elevator_controller_fsm.vhd</a></p>
<ul>
<li><p><a class="reference internal" href="#state-register-process" id="id7">State register process</a></p></li>
<li><p><a class="reference internal" href="#enumerated-types" id="id8">Enumerated types</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#elevator-controller-fsm-tb-vhd" id="id9">elevator_controller_fsm_tb.vhd</a></p></li>
<li><p><a class="reference internal" href="#deliverables" id="id10">Deliverables</a></p></li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>In this in-class exercise, you design an elevator controller that will traverse
four floors (numbered 1 to 4).
You will only simulate your design; you will not implement it in hardware during this ICE.</p>
<section id="objectives">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">Objectives</a><a class="headerlink" href="#objectives" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Create and simulate a synchronous sequential logic system</p></li>
<li><p>Use VHDL to build a provided state diagram.</p></li>
<li><p>Write a testbench for a synchronous system to fully simulate the state machine’s operation.</p></li>
</ul>
</section>
<section id="end-state">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">End State</a><a class="headerlink" href="#end-state" title="Link to this heading">#</a></h3>
<p>Provide a demo of your waveform to your instructor.</p>
<p>You are not required to turn in ICE5; however,
<strong>ensure the following files are pushed to your repository</strong>:</p>
<ol class="arabic simple">
<li><p>VHDL files</p></li>
<li><p>Waveform and waveform configuration files</p></li>
</ol>
</section>
</section>
<section id="system-specification">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">System Specification</a><a class="headerlink" href="#system-specification" title="Link to this heading">#</a></h2>
<p>Your elevator controller will traverse four floors (numbered 1 to 4).</p>
<ul class="simple">
<li><p>Two external <strong>inputs</strong>, <code class="docutils literal notranslate"><span class="pre">i_up_down</span></code> and <code class="docutils literal notranslate"><span class="pre">i_stop</span></code>.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">i_up_down</span></code> is ‘1’ and <code class="docutils literal notranslate"><span class="pre">i_stop</span></code> is ‘0’, the elevator will move
up until it reaches the top floor (one floor per clock, of course).</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">i_up_down</span></code> is ‘0’ and <code class="docutils literal notranslate"><span class="pre">i_stop</span></code> is ‘0’, the elevator will move
down until it reaches the bottom floor (one floor per clock).</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">i_stop</span></code> is ‘1’, the system <em>always</em> stops at the current floor.</p></li>
<li><p>When the elevator is at the top floor, it will stay there until <code class="docutils literal notranslate"><span class="pre">i_up_down</span></code>
goes to ‘0’.</p></li>
<li><p>When the elevator is at the bottom floor, it will stay there until <code class="docutils literal notranslate"><span class="pre">i_up_down</span></code>
goes to ‘1’.</p></li>
<li><p>The system should <strong>output</strong> the floor it is on (1 - 4) as a <strong>four-bit binary number</strong>, <code class="docutils literal notranslate"><span class="pre">o_floor</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i_reset</span></code> <em>synchronously</em> puts the FSM into state <strong>Floor 2</strong>.</p></li>
</ul>
<p>This description is translated into a state diagram shown in <a class="reference internal" href="#elevator-fsm"><span class="std std-numref">Fig. 29</span></a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">Inputs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">i_up_down </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is Up, &#39;0&#39; is Down</span>
<span class="w">    </span><span class="nt">i_stop    </span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is Stop, &#39;0&#39; is Go</span>

<span class="nt">Outputs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">o_floor</span><span class="p">:</span>
<span class="w">        </span><span class="nt">Floor 1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0001&quot;</span>
<span class="w">        </span><span class="nt">Floor 2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0010&quot;</span>
<span class="w">        </span><span class="nt">Floor 3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0011&quot;</span>
<span class="w">        </span><span class="nt">Floor 4</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0100&quot;</span>
</pre></div>
</div>
<figure class="align-default" id="elevator-fsm">
<img alt="../_images/ice5_elevator-fsm.png" src="../_images/ice5_elevator-fsm.png" />
<figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text">Elevator controller state machine</span><a class="headerlink" href="#elevator-fsm" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="setup-vivado">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Setup Vivado</a><a class="headerlink" href="#setup-vivado" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Fork and clone <a class="reference external" href="https://github.com/USAFA-ECE/ece281-ice5">ICE 5</a></p></li>
<li><p>Open the folder</p></li>
<li><p>Double click <code class="docutils literal notranslate"><span class="pre">elevatorController.xpr</span></code> to open Vivado!</p></li>
</ol>
<blockquote>
<div><p>Modify headers and make an initial commit.</p>
</div></blockquote>
</section>
<section id="elevator-controller-fsm-vhd">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">elevator_controller_fsm.vhd</a><a class="headerlink" href="#elevator-controller-fsm-vhd" title="Link to this heading">#</a></h2>
<p>The entity description has been completed for you.</p>
<section id="state-register-process">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">State register process</a><a class="headerlink" href="#state-register-process" title="Link to this heading">#</a></h3>
<p>Recall that <code class="docutils literal notranslate"><span class="pre">i_reset</span></code> should be synchronous! Reference Lesson 22 Note Taker.
The reset state is <strong>Floor 2</strong>.</p>
<p>Because <code class="docutils literal notranslate"><span class="pre">i_stop</span></code> effectively functions as an <em>enable</em>, we can handle it
in our state register implementation.</p>
<p>Effectively, (if reset is low) then current state gets next state only when
the rising clock edge <strong>and</strong> the elevator is not stopped.
Otherwise, we stay at our current state (floor).</p>
<p>This allows us to greatly simplify our next state and output logic! See below.</p>
</section>
<section id="enumerated-types">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Enumerated types</a><a class="headerlink" href="#enumerated-types" title="Link to this heading">#</a></h3>
<p>This template has already been loaded with <strong>enumerated types</strong> for your states.</p>
<p>Enumerated types allow you to define your next state and output logic in terms of the state name instead of bits! This means you don’t have to create the equations
for a chosen encoding type. Vivado gets to take care of that for you.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">type</span><span class="w"> </span><span class="n">sm_floor</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="p">(</span><span class="n">s_floor1</span><span class="p">,</span><span class="w"> </span><span class="n">s_floor2</span><span class="p">,</span><span class="w"> </span><span class="n">s_floor3</span><span class="p">,</span><span class="w"> </span><span class="n">s_floor4</span><span class="p">);</span>
</pre></div>
</div>
<p>Here we have the type <code class="docutils literal notranslate"><span class="pre">sm_floor</span></code> which can be any one of the four provided states.
We can also make signals of this type! This signal can be assigned the values
defined above.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="k">signal</span><span class="w"> </span><span class="n">f_Q</span><span class="p">,</span><span class="w"> </span><span class="n">f_Q_next</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">sm_floor</span><span class="p">;</span>
</pre></div>
</div>
<p>You can use an enumerated type for conditional assignments!
See <code class="docutils literal notranslate"><span class="pre">VHDL</span> <span class="pre">Reference.pdf</span></code> on Teams.</p>
<p>Because we handled <code class="docutils literal notranslate"><span class="pre">i_stop</span></code> in the state register (see above),
our concurrent logic here can be greatly simplified.</p>
<p>We provide a shell. The <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">&gt;</span></code> symbol represents a placeholder.
The <code class="docutils literal notranslate"><span class="pre">...</span></code> means you need additional lines of logic.</p>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Next State Logic</span>
<span class="n">f_Q_next</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="c1">-- going up</span>
<span class="w">            </span><span class="p">...</span>
<span class="w">            </span><span class="p">...</span>
<span class="w">            </span><span class="p">...</span><span class="w"> </span><span class="c1">-- going down</span>
<span class="w">            </span><span class="p">...</span>
<span class="w">            </span><span class="p">...</span><span class="w"> </span><span class="k">else</span>
<span class="w">            </span><span class="p">...;</span><span class="w"> </span><span class="c1">-- default case</span>
</pre></div>
</div>
<div class="highlight-vhdl notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Output logic</span>
<span class="k">with</span><span class="w"> </span><span class="n">f_Q</span><span class="w"> </span><span class="k">select</span>
<span class="w">    </span><span class="n">o_floor</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">s_floor1</span><span class="p">,</span>
<span class="w">            </span><span class="p">...</span>
<span class="w">            </span><span class="p">...</span>
<span class="w">            </span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="k">others</span><span class="p">;</span><span class="w"> </span><span class="c1">-- default is floor1</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The entity declaration has been completed for you.</p></li>
<li><p>Use a <strong>synchronous reset</strong> for your controller FSM</p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>We recommend that you handle <code class="docutils literal notranslate"><span class="pre">i_stop</span></code> logic in your <strong>process</strong>.
This will save you <em>lots</em> of lines in the concurrent statements.</p>
<p>Also, think about how nested if statements and <code class="docutils literal notranslate"><span class="pre">elsif</span></code> are helpful.</p>
</div>
<blockquote>
<div><p>Read through the provided code and comments, and then build the state machine in VHDL.</p>
</div></blockquote>
</section>
</section>
<section id="elevator-controller-fsm-tb-vhd">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">elevator_controller_fsm_tb.vhd</a><a class="headerlink" href="#elevator-controller-fsm-tb-vhd" title="Link to this heading">#</a></h2>
<p>We provide a component declarations, port maps, and simulated clock.
All you need to do is complete the <code class="docutils literal notranslate"><span class="pre">test_process</span></code>.</p>
<p>Make sure you hit:</p>
<ul class="simple">
<li><p>Reset</p></li>
<li><p>Elevator going up</p></li>
<li><p>Elevator going down</p></li>
<li><p>Elevator waiting on floors</p></li>
<li><p>Elevator stopping on top floor (while going up)</p></li>
<li><p>Elevator stopping on bottom floor (while going down)</p></li>
</ul>
<ol class="arabic simple">
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">f_Q</span></code> and <code class="docutils literal notranslate"><span class="pre">f_Q_next</span></code> signals to your waveform.</p></li>
<li><p>Save the <code class="docutils literal notranslate"><span class="pre">.wcfg</span></code></p></li>
<li><p>Add a screenshot to your README</p></li>
</ol>
<blockquote>
<div><p>Show the waveform to your instructor.</p>
</div></blockquote>
</section>
<section id="deliverables">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Deliverables</a><a class="headerlink" href="#deliverables" title="Link to this heading">#</a></h2>
<p>Double check that you have all VHD files and your Waveform pushed to GitHub.
The GitHub Action should run your testbench and pass.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Deliverable</p></th>
<th class="head"><p>Points</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Waveform Demo</p></td>
<td><p>50</p></td>
</tr>
<tr class="row-odd"><td><p>Passing GitHub Action</p></td>
<td><p>50</p></td>
</tr>
</tbody>
</table>
</div>
<p>Congratulations, you have completed In Class Exercise 5!</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./ICE"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="ICE4.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">ICE 4: Stoplight</p>
      </div>
    </a>
    <a class="right-next"
       href="ICE6.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">ICE 6: Time Division Multiplexor</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">Objectives</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#end-state">End State</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#system-specification">System Specification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-vivado">Setup Vivado</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#elevator-controller-fsm-vhd">elevator_controller_fsm.vhd</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#state-register-process">State register process</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#enumerated-types">Enumerated types</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#elevator-controller-fsm-tb-vhd">elevator_controller_fsm_tb.vhd</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deliverables">Deliverables</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By DFEC
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>